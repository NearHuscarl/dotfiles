# workspace name
set $ws_term  "1"
set $ws_dev   "2"
set $ws_web   "3"
set $ws_doc   "4"
set $ws_chat  "5"
set $ws_file  "6"
set $ws_mail  "7"
set $ws_music "8"
set $ws9      "9"
set $ws_misc  "10"

# load custom hotkey
exec --no-startup-id xmodmap ~/.Xmodmap
# set random wallpaper at startup
exec --no-startup-id nitrogen --random --set-scaled "Pictures/Low Poly"
# add compton effect in i3
exec --no-startup-id compton
# music player daemon
exec --no-startup-id mpd
# i3 + some xfce4 compononets
# XFCE stores it's configuration for the running session in xfconfd
exec --no-startup-id xfconfd
# an application that runs in the background to apply various settings in the desktop
exec --no-startup-id xfsettingsd
# application that make volume hardware shortcut to work in hp
exec --no-startup-id xfce4-volumed
exec --no-startup-id xfce4-power-manager
exec --no-startup-id xscreensaver -nosplash
# start dropbox
exec --no-startup-id "dropbox start"
# Enable polybar in i3 session
exec_always --no-startup-id $HOME/.config/polybar/launch.sh
# start network manager applet
exec --no-startup-id nm-applet
# start pulseaudio
# exec --no-startup-id i3-msg 'exec /usr/bin/pulseaudio --start'
# dirty script to fix crackling sound when using alsa
exec --no-startup-id $HOME/bin/alsa-fix.sh

# xfce4-settings-manager
# xfce4-mime-settings (opens mime editor)
# xfce4-session-settings (startup/auto-start settings)
# xfce4-accessibility-settings 
# xfce4-mouse-settings
# xfce4-settings-editor
# xfce4-appearance-settings
# xfce4-notes-settings          
# xfce4-notifyd-config (notification settings)
# xfce4-clipman-settings (default clip manager's)
# xfce4-power-manager-settings
# xfce4-display-settings
# xfce4-keyboard-settings

# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.

set $mod Control

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
font pango:monospace 8

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# kill focused window
bindsym $mod+slash kill

# kill all windows the focused workspace
bindsym $mod+shift+slash focus parent,focus parent,focus parent,focus parent,kill

# start dmenu (a program launcher)
# bindsym $mod+d exec dmenu_run
# bindsym $mod+d exec --no-startup-id i3-dmenu-desktop
mode "launch" {
        bindsym k exec --no-startup-id rofi -show keys; mode "default"
        bindsym d exec --no-startup-id rofi -show drun; mode "default"
        bindsym r exec --no-startup-id rofi -show run; mode "default"
        bindsym w exec --no-startup-id rofi -show window; mode "default"
        bindsym i exec --no-startup-id $HOME/bin/rofi-surfraw-websearch.sh; mode "default"
        bindsym b exec --no-startup-id $HOME/bin/rofi-surfraw-bookmarks.sh; mode "default"
        bindsym l exec --no-startup-id $HOME/bin/rofi-locate.sh; mode "default"
        bindsym shift+1 exec --no-startup-id ~/bin/rofi-bangs.sh; mode "default"

        # back to normal: Enter or Escape
        bindsym $mod+d mode "default"
        bindsym Return mode "default"
        bindsym Escape mode "default"
}
# dynamic menu (rofi)
bindsym $mod+d mode "launch"

# change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right
# bindsym $mod+semicolon focus right

# lock screen
bindsym $mod+Shift+l exec i3lock-fancy -f Roboto-Bold

# start a terminal
bindsym $mod+Return exec xfce4-terminal --disable-server

# split in horizontal orientation
bindsym $mod+x split h

# split in vertical orientation
bindsym $mod+v split v
bindsym $mod+g split toggle

# enter fullscreen mode for the focused container
bindsym $mod+shift+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+t layout tabbed
bindsym $mod+e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# focus the parent container
# bindsym $mod+a focus parent

# focus the child container
#bindsym $mod+d focus child

# switch to workspace
bindsym $mod+1 workspace $ws_term
bindsym $mod+2 workspace $ws_dev
bindsym $mod+3 workspace $ws_web
bindsym $mod+4 workspace $ws_doc
bindsym $mod+5 workspace $ws_chat
bindsym $mod+6 workspace $ws_file
bindsym $mod+7 workspace $ws_mail
bindsym $mod+8 workspace $ws_music
bindsym $mod+9 workspace $ws9
bindsym $mod+0 workspace $ws_misc

bindsym $mod+n workspace back_and_forth
bindsym $mod+period workspace next
bindsym $mod+comma workspace prev

mode "move" {
        bindsym h move left
        bindsym j move down
        bindsym k move up
        bindsym l move right

        bindsym $mod+h focus left
        bindsym $mod+j focus down
        bindsym $mod+k focus up
        bindsym $mod+l focus right

        # move focused container to workspace
        bindsym 1 mode "default"; move container to workspace $ws_term; workspace $ws_term
        bindsym 2 mode "default"; move container to workspace $ws_dev; workspace $ws_dev
        bindsym 3 mode "default"; move container to workspace $ws_web; workspace $ws_web
        bindsym 4 mode "default"; move container to workspace $ws_doc; workspace $ws_doc
        bindsym 5 mode "default"; move container to workspace $ws_chat; workspace $ws_chat
        bindsym 6 mode "default"; move container to workspace $ws_file; workspace $ws_file
        bindsym 7 mode "default"; move container to workspace $ws_mail; workspace $ws_mail
        bindsym 8 mode "default"; move container to workspace $ws_music; workspace $ws_music
        bindsym 9 mode "default"; move container to workspace $ws9; workspace $ws9
        bindsym 0 mode "default"; move container to workspace $ws_misc; workspace $ws_misc

        # move focused container to next/prev workspace
        bindsym period move container to workspace next; workspace next
        bindsym comma  move container to workspace prev; workspace prev

        # back to normal: Enter or Escape
        bindsym $mod+m mode "default"
        bindsym Return mode "default"
        bindsym Escape mode "default"
}

bindsym $mod+m mode "move"

# terminal -> propx -> point to the targeted to get window class
# assign [class="xfce4-terminal"] $ws
assign [class="Gvim"]          $ws_dev
assign [class="Google-chrome"] $ws_web
assign [class="Zathura"]       $ws_doc
assign [class="Caprine"]       $ws_chat
assign [class="Thunar"]        $ws_file
assign [title="Ranger"]        $ws_file
assign [class="Thunderbird"]   $ws_mail

# reload the configuration file
bindsym $mod+Shift+r reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym Mod4+r restart
# exit i3 (logs you out of your X session)
bindsym $mod+Shift+e exec --no-startup-id "i3-nagbar \
   -t warning \
   -m 'You pressed the exit shortcut. Do you really want to exit i3? \
   This will end your X session.'\
   -b 'Yes, exit i3' 'i3-msg exit'"

# Make focused window scratchpad
bindsym $mod+shift+minus move scratchpad
# Show the first scratchpad window
bindsym $mod+minus scratchpad show

# Show the sup-mail scratchpad window, if any.
bindsym $mod+i [class="Gvim"] scratchpad show

# resize window (you can also use the mouse for that)
mode "resize" {
        # change focus
        bindsym $mod+h focus left
        bindsym $mod+j focus down
        bindsym $mod+k focus up
        bindsym $mod+l focus right

        bindsym h resize shrink width 2 px or 2 ppt
        bindsym j resize grow height 2 px or 2 ppt
        bindsym k resize shrink height 2 px or 2 ppt
        bindsym l resize grow width 2 px or 2 ppt

        bindsym shift+h resize shrink width 8 px or 8 ppt
        bindsym shift+j resize grow height 8 px or 8 ppt
        bindsym shift+k resize shrink height 8 px or 8 ppt
        bindsym shift+l resize grow width 8 px or 8 ppt

        # back to normal: Enter or Escape
        bindsym $mod+r mode "default"
        bindsym Return mode "default"
        bindsym Escape mode "default"
}

bindsym $mod+r mode "resize"

# no border on all windows
new_window none
# new_window normal

# open certain window in floating mode
for_window [window_role="pop-up"]      floating enable
for_window [window_role="bubble"]      floating enable
for_window [window_role="task_dialog"] floating enable
for_window [window_role="Preferences"] floating enable
for_window [window_type="dialog"]      floating enable
for_window [window_type="menu"]        floating enable
for_window [class="Pavucontrol"]       floating enable
for_window [class="File-roller"]       floating enable
for_window [class="Nitrogen"]          floating enable
for_window [class="Gucharmap"]         floating enable
for_window [class="Sxiv"]              floating enable
for_window [title="Floating"]          floating enable
# for_window [class="XTerm"]             floating enable

# open certain window in fullscreen mode
# for_window [title="^Developer Tools.*"] fullscreen enable
# very dirty workaround to make chrome developer tools scratchpad fullscreen
for_window [title="^Developer Tools.*"] \
 floating enable; \
 resize shrink width 10000px; \
 resize shrink height 10000px; \
 resize grow width 1290px; \
 resize grow height 718px; \
 move absolute position 0 px 0 px

# application launcher shortcut
bindsym F1 exec xfce4-terminal --disable-server
bindsym F2 exec gvim; workspace $ws_dev
bindsym F3 exec google-chrome-stable; workspace $ws_web
bindsym F4 exec zathura; workspace $ws_doc
bindsym F5 exec caprine; workspace $ws_chat
# bindsym F6 exec thunar; workspace $ws_file
bindsym F6 exec xfce4-terminal --title="Ranger" -e "ranger"; workspace $ws_file
bindsym F7 exec thunderbird; workspace $ws_mail
bindsym F8 \
  workspace $ws_music; \
  append_layout /home/near/.config/i3/ws-music.json; \
  exec xfce4-terminal -e ncmpcpp                 --title="Music"; \
  exec xfce4-terminal -e "ncmpcpp -s visualizer" --title="Visualizer"; \
  exec xfce4-terminal -e "ncmpcpp -s clock"      --title="Clock"

bindsym F9 exec gnome-calculator
bindsym ctrl+shift+n exec xfce4-terminal -e neofetch \
      --hide-menubar \
      --hide-borders \
      --hide-toolbar \
      --hide-scrollbar \
      --hold \
      --title='Floating' \
      && tput civis --invisible

# gaps
gaps inner 15
workspace $ws_web gaps inner 0
# only use gap when there are more than 1 container
# smart_gaps on

set $mode_gaps Gaps: (o) outer, (i) inner
set $mode_gaps_outer Outer Gaps: +|-|0 (local), Shift + +|-|0 (global)
set $mode_gaps_inner Inner Gaps: +|-|0 (local), Shift + +|-|0 (global)

mode "$mode_gaps_inner" {
        bindsym o     mode "$mode_gaps_outer"

        bindsym plus  gaps inner current plus 5
        bindsym minus gaps inner current minus 5
        bindsym 0     gaps inner current set 0

        bindsym Shift+plus  gaps inner all plus 5
        bindsym Shift+minus gaps inner all minus 5
        bindsym Shift+0     gaps inner all set 0

        bindsym Return mode "default"
        bindsym Escape mode "default"
}
mode "$mode_gaps_outer" {
        bindsym i     mode "$mode_gaps_inner"

        bindsym plus  gaps outer current plus 5
        bindsym minus gaps outer current minus 5
        bindsym 0     gaps outer current set 0

        bindsym Shift+plus  gaps outer all plus 5
        bindsym Shift+minus gaps outer all minus 5
        bindsym Shift+0     gaps outer all set 0

        bindsym Return mode "default"
        bindsym Escape mode "default"
}
bindsym $mod+Shift+g mode "$mode_gaps_inner"

# xfce4 already done that
# bindsym XF86AudioRaiseVolume exec amixer -q set Master 2dB+ unmute
# bindsym XF86AudioLowerVolume exec amixer -q set Master 2dB- unmute
# bindsym XF86AudioMute exec amixer -q set Master toggle

# temp settings

# reload polybar
bindsym $mod+shift+p exec --no-startup-id $HOME/bin/reload-polybar.sh
# bindsym $mod+y move scratchpad
# bindsym $mod+p scratchpad show
